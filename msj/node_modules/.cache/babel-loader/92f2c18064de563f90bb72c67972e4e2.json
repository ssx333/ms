{"remainingRequest":"E:\\1msj\\msj\\node_modules\\babel-loader\\lib\\index.js!E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\1msj\\msj\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\1msj\\msj\\src\\components\\pages\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\1msj\\msj\\src\\components\\pages\\Cart.vue","mtime":1564658967666},{"path":"E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/checkbox/style\";\nimport _Checkbox from \"vant/es/checkbox\";\nimport \"vant/es/checkbox-group/style\";\nimport _CheckboxGroup from \"vant/es/checkbox-group\";\nimport \"vant/es/submit-bar/style\";\nimport _SubmitBar from \"vant/es/submit-bar\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nVue.use(_Cell).use(_CellGroup).use(_Button).use(_SwipeCell).use(_Checkbox).use(_CheckboxGroup).use(_SubmitBar).use(_Toast);\nexport default {\n  data: function data() {\n    return {\n      checkbox: false,\n      list: {},\n      cart: [],\n      sum: 0,\n      stt: ''\n    };\n  },\n  methods: {\n    cart_sit: function cart_sit(m, n) {\n      if (m == true) {\n        m = 1;\n      } else {\n        m = 0;\n      }\n\n      this.axios.get('http://127.0.0.1:3000/cart_sit', {\n        params: {\n          x_default: m,\n          id: n\n        }\n      }).then(function (res) {}).catch(function (err) {\n        console.log(err);\n      });\n    },\n    onClickLeft: function onClickLeft() {},\n    router_link: function router_link() {\n      // 遍历保存当前勾选的商品并将信息传到下一个页面\n      var str = 0;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.cart[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var num = _step.value;\n\n          // 判断是否没有选中商品,没有的化不会往下一步进行\n          if (num.x_is_checked == true) {\n            // this.carts.push(num)\n            this.$router.push({\n              path: '/addressList'\n            }); // sessionStorage.setItem(\"cart\",this.carts.join(''))\n\n            str += num.x_price; // 将数据插入到vuex 中\n            // 通知数据仓库添加到数据仓库\n\n            this.$store.commit(\"add\", num);\n          }\n        } // 没有选中商品进行提示\t\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (this.stt == null) {\n        _Dialog.confirm({\n          title: '未登录',\n          message: '是否去登录'\n        }).then(function () {// on confirm\n        }).catch(function () {// on cancel\n        });\n      } else {\n        if (str == 0) {\n          _Toast('请选中要购买的商品');\n        }\n      }\n    },\n    dianji: function dianji(e, m, id) {\n      // 判断数量最小值为1 然后根据传入的数字进行数量加减\n      if (this.cart[m].x_count > 1 || e > 0) {\n        this.cart[m].x_count += e;\n        var x_count = this.cart[m].x_count;\n        this.axios.get('http://127.0.0.1:3000/cart_num', {\n          params: {\n            x_count: x_count,\n            id: id\n          }\n        }).then(function (res) {}).catch(function (err) {\n          console.log(err);\n        });\n      }\n    },\n    chock: function chock() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.cart[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var p = _step2.value;\n          p.x_is_checked = !this.checkbox;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    },\n    delete_list: function delete_list(e, id) {\n      var _this = this;\n\n      _Dialog.confirm({\n        message: '移出购物车'\n      }).then(function () {\n        // on confirm\n        _this.cart.splice(e, 1);\n\n        _this.axios.get('http://127.0.0.1:3000/cart_del', {\n          params: {\n            id: id\n          }\n        }).then(function (res) {\n          if (res.data.code) {}\n        });\n      }).catch(function () {// on cancel\n      });\n    }\n  },\n  computed: {\n    total: function total() {\n      var sum = 0;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.cart[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var p = _step3.value;\n\n          if (p.x_is_checked == false) {\n            this.checkbox = false;\n          }\n\n          if (p.x_is_checked == true) {\n            sum += p.x_price * p.x_count;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return sum * 100;\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    // 页面打开时加载购物车数据\n    // 页面加载的时候判断是否登录获取id值,然后根据id值请求数据\n    // if(){}else{\n    // 弹出登录要求,然后跳转页面\n    // }\n    // localStorage.getItem(key)\n    this.stt = window.sessionStorage.getItem('sid');\n    console.log(this.stt);\n\n    if (this.stt == null) {\n      console.log(123);\n\n      _Dialog.confirm({\n        title: '未登录',\n        message: '是否去登录'\n      }).then(function () {\n        _this2.$router.push('/login');\n      }).catch(function () {// on cancel\n      });\n    } else {\n      // 登录后查询stt的id下的购物车\n      this.axios.get('http://127.0.0.1:3000/cart', {\n        params: {\n          id: this.stt\n        }\n      }).then(function (res) {\n        _this2.cart = res.data;\n        _this2.cart.checked = res.data.x_is_checked;\n      });\n    }\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<van-nav-bar\r\n  title=\"购物车\"\r\n  fixed\r\n  @click-left=\"onClickLeft\"\r\n  \r\n/>\r\n<div style=\"width:100%;height:3rem\"></div>\r\n\t\t<!-- 购物车内容 -->\r\n\t\t<table></table>\r\n\t\t<div class=\"msj_details\">\r\n\t\t\t<van-swipe-cell v-for=\"(item,i) of cart \" :key=\"i\" class=\"msj_margin_top\">\r\n\r\n\t\t\t\t<div class=\"msj_details_top\">\r\n\t\t\t\t\t<!-- 前面的选择对勾 -->\r\n\t\t\t\t\t<van-checkbox v-model=\"item.x_is_checked\" checked-color=\"#07c160\" @click=\"cart_sit(!item.x_is_checked,item.x_id)\"></van-checkbox>\r\n\t\t\t\t\t<!-- 中间的内容部分 -->\r\n\t\t\t\t\t<div class=\"msj_details_img\">\r\n\t\t\t\t\t\t<div><img :src=\"item.x_img_url\" alt=\"\"></div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<div class=\"msj_title\">{{item.x_title}}</div>\r\n\t\t\t\t\t\t\t<p class=\"msj_small\">{{item.x_name}}</p>\r\n\t\t\t\t\t\t\t<p class=\"msj_pic\"><span>￥</span>{{item.x_price.toFixed(2)}}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!-- 右边数量选择 -->\r\n\t\t\t\t\t<div class=\"msj_delete_right\">\r\n\t\t\t\t\t\t<span @click=\"dianji(1,i,item.x_id)\">+</span>\r\n\t\t\t\t\t\t<i class=\"msj_input\">{{item.x_count}}</i>\r\n\t\t\t\t\t\t<span @click=\"dianji(-1,i,item.x_id)\">-</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<template slot=\"right\" class=\"msj_delete_right\">\r\n\t\t\t\t\t<van-button type=\"danger\" text=\"删除\" size=\"small\" round @click=\"delete_list(i,item.x_id)\" />\r\n\t\t\t\t</template>\r\n\t\t\t</van-swipe-cell>\r\n\r\n\t\t</div>\r\n\t\t<table></table>\r\n\t\t<div style=\"width: 100%;height:6rem;\"></div>\r\n\t\t<van-submit-bar :price=\"total\" button-text=\"去结算\" @submit=\"router_link\">\r\n\t\t\t<van-checkbox v-model=\"checkbox\" @click=\"chock()\">全选</van-checkbox>\r\n\t\t</van-submit-bar>\r\n\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport Vue from \"vue\"\r\n\timport {\r\n\t\tSwipeCell,\r\n\t\tButton,\r\n\t\tCell,\r\n\t\tCellGroup,\r\n\t\tCheckbox,\r\n\t\tCheckboxGroup,\r\n\t\tSubmitBar,\r\n\t\tDialog,\r\n\t\tToast\r\n\t} from 'vant';\r\n\r\n\tVue.use(Cell).use(CellGroup).use(Button).use(SwipeCell).use(Checkbox).use(CheckboxGroup).use(SubmitBar).use(Toast);\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcheckbox: false,\r\n\t\t\t\tlist: {},\r\n\t\t\t\tcart: [],\r\n\t\t\t\tsum:0,\r\n\t\t\t\tstt:''\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tcart_sit(m,n){\r\n\t\t\t\tif(m==true){\r\n\t\t\t\t\tm=1\r\n\t\t\t\t}else{\r\n\t\t\t\t\tm=0\r\n\t\t\t\t}\r\n\t\t\t\tthis.axios.get('http://127.0.0.1:3000/cart_sit',{params:{x_default:m,id:n}}).then(res=>{\r\n      \t\t\t}).catch(err=>{\r\n\t\t\t\t\t  console.log(err)\r\n\t\t\t\t  })\r\n\t\t\t},\r\n\t\t\tonClickLeft(){\r\n\t\t\t},\r\n\t\t\trouter_link(){\r\n\t\t\t\t// 遍历保存当前勾选的商品并将信息传到下一个页面\r\n\t\t\t\tvar str=0;\r\n\t\t\t\tfor (var num of this.cart) {\r\n\t\t\t\t\t// 判断是否没有选中商品,没有的化不会往下一步进行\r\n\t\t\t\t\tif(num.x_is_checked==true){\r\n\t\t\t\t\t\t// this.carts.push(num)\r\n\t\t\t\t\t\tthis.$router.push({path:'/addressList'});\r\n\t\t\t\t\t\t// sessionStorage.setItem(\"cart\",this.carts.join(''))\r\n\t\t\t\t\t\tstr+=num.x_price\r\n\t\t\t\t\t\t// 将数据插入到vuex 中\r\n\t\t\t\t\t\t// 通知数据仓库添加到数据仓库\r\n\t\t\t\t\t\tthis.$store.commit(\"add\",num)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// 没有选中商品进行提示\t\r\n\t\t\t\t\tif(this.stt==null){\r\n\t\t\t\t\t\t\tDialog.confirm({\r\n\t\t\t\t\t\t\ttitle: '未登录',\r\n\t\t\t\t\t\t\tmessage: '是否去登录'\r\n\t\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\t// on confirm\r\n\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t// on cancel\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(str==0){\r\n\t\t\t\t\t\t\tToast('请选中要购买的商品')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n        \t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdianji: function(e, m,id) {\r\n\t\t\t\t// 判断数量最小值为1 然后根据传入的数字进行数量加减\r\n\t\t\t\tif (this.cart[m].x_count > 1 || e > 0) {\r\n\t\t\t\t\tthis.cart[m].x_count += e\r\n\t\t\t\t\tvar x_count=this.cart[m].x_count\r\n\t\t\tthis.axios.get('http://127.0.0.1:3000/cart_num',{params:{x_count:x_count,id:id}}).then(res=>{\r\n      \t\t\t}).catch(err=>{\r\n\t\t\t\t\t  console.log(err)\r\n\t\t\t\t  })\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchock() {\r\n\t\t\t\tfor (var p of this.cart) {\r\n\t\t\t\t\tp. x_is_checked= !this.checkbox\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tdelete_list(e,id) {\r\n\t\t\t\tDialog.confirm({\r\n\t\t\t\t\tmessage: '移出购物车'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\t// on confirm\r\n\t\t\t\t\tthis.cart.splice(e, 1)\r\n\t\t\t\t\tthis.axios.get('http://127.0.0.1:3000/cart_del',{params:{id:id}}).then(res=>{\r\n         \t\t\tif(res.data.code){\r\n\t\t\t\t\t\t \r\n         \t\t\t \t}\r\n      \t\t\t\t})\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t// on cancel\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttotal() {\r\n\t\t\t\tvar sum = 0;\r\n\t\t\t\tfor (var p of this.cart) {\r\n\t\t\t\t\tif (p.x_is_checked == false) {\r\n\t\t\t\t\t\tthis.checkbox= false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (p.x_is_checked == true) {\r\n\t\t\t\t\t\tsum += p.x_price * p.x_count;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn sum * 100;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated(){\r\n\t\t\t// 页面打开时加载购物车数据\r\n\t\t\t// 页面加载的时候判断是否登录获取id值,然后根据id值请求数据\r\n\t\t\t// if(){}else{\r\n\t\t\t\t// 弹出登录要求,然后跳转页面\r\n\r\n\t\t\t// }\r\n\t\t\t// localStorage.getItem(key)\r\n\t\t\t\r\n\t\tthis.stt=window.sessionStorage.getItem('sid');\r\n\t\tconsole.log(this.stt)\r\n\t\tif(this.stt==null){\r\n\t\t\tconsole.log(123)\r\n\t\t\tDialog.confirm({\r\n\t\t\ttitle: '未登录',\r\n\t\t\tmessage: '是否去登录'\r\n\t\t\t}).then(() => {\r\n\t\t\t this.$router.push('/login');\r\n\t\t\t}).catch(() => {\r\n\t\t\t// on cancel\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t// 登录后查询stt的id下的购物车\r\n\t\tthis.axios.get('http://127.0.0.1:3000/cart',{params:{id:this.stt}}).then(res=>{\r\n\t\tthis.cart=res.data\r\n\t\tthis.cart.checked=res.data.x_is_checked\r\n      })\r\n\t\t}\r\n\t\t\t\r\n\t\r\n\t\t},\r\n\t}\r\n</script>\r\n<style>\r\n/* 顶部导航的样式 */\r\n.van-nav-bar{\r\n\tbackground: black!important;\r\n}\r\n.van-nav-bar__title,.van-nav-bar__text,.van-nav-bar .van-icon{\r\n\tcolor:white!important;\r\n}\r\n\r\n\t/* 购物车内具体内容 */\r\n\t.msj_details {\r\n\t\twidth: 95%;\r\n\t\tbackground: #ffffff;\r\n\t\tmargin: 0.5rem auto 0.5rem auto;\r\n\t\tborder-top:1px solid #eee;\r\n\t\tborder-bottom:1px solid #eee;\r\n\t\tborder-radius: 1rem;\r\n\t}\r\n\r\n\t.msj_details_top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\theight: 4rem;\r\n\t}\r\n\r\n\t/* 具体内容中图片和介绍 */\r\n\t.msj_details_img {\r\n\t\tdisplay: flex;\r\n\t\twidth: 65%;\r\n\t}\r\n\r\n\t/* 大标题 */\r\n\t.msj_title {\r\n\t\tfont-size: 0.8rem;\r\n\t\tmargin: 0.5rem 0 0 1rem;\r\n\t}\r\n\r\n\t.msj_small {\r\n\t\tfont-size: 0.6rem;\r\n\t\tmargin: 0.5rem 0 0 1rem;\r\n\t}\r\n\r\n\t.msj_pic {\r\n\t\tcolor: #f97a2e;\r\n\t\tfont-size: 0.9rem;\r\n\t\tmargin: 0.5rem 0 0 1rem;\r\n\t}\r\n\r\n\t.msj_pic>span {\r\n\t\tfont-size: 0.7rem;\r\n\t}\r\n\r\n\t.msj_details_img>div>img {\r\n\t\theight: 4rem;\r\n\t}\r\n\r\n\t/* span 数字文本框的样式 */\r\n\t.msj_input {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 1.3rem;\r\n\t\theight: 1.3rem;\r\n\t\tline-height: 1.3rem;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.msj_details_choose> {\r\n\t\tline-height: 4rem;\r\n\t}\r\n\r\n\t/* 右边划出删除居中 */\r\n\t.van-swipe-cell__right {\r\n\t\tline-height: 4rem;\r\n\t}\r\n\r\n\t/* 加减数量居中 */\r\n\t.msj_delete_right {\r\n\t\tmargin-top: 1.3rem;\r\n\t}\r\n\r\n\t.msj_delete_right>span {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 1.3rem;\r\n\t\theight: 1.3rem;\r\n\t\tline-height: 1.3rem;\r\n\t\tbackground: #e76f2a;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 50%;\r\n\r\n\t}\r\n\r\n\t.msj_margin_top {\r\n\t\tmargin: 1rem 0;\r\n\t}\r\n\r\n\t.van-submit-bar {\r\n\t\tbottom: 3rem !important;\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src/components/pages"}]}