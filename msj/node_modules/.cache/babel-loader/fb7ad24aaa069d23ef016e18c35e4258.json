{"remainingRequest":"E:\\1msj\\msj\\node_modules\\babel-loader\\lib\\index.js!E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\1msj\\msj\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\1msj\\msj\\src\\components\\views\\loginReg\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\1msj\\msj\\src\\components\\views\\loginReg\\login.vue","mtime":1564658967899},{"path":"E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\1msj\\msj\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport Vue from 'vue';\nVue.use(_Toast);\nexport default {\n  props: {\n    istrue: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      uname: '',\n      upwd: ''\n    };\n  },\n  methods: {\n    zc: function zc() {\n      var _this = this;\n\n      this.$emit('getDate', false);\n      var s_name = this.uname;\n      var s_pwd = this.upwd;\n      var reg = /^\\w{6,9}$/i;\n\n      if (!s_name) {\n        _Toast(\"用户名不能为空\");\n\n        return;\n      } else if (reg.test(s_name) == false) {\n        _Toast(\"用户名是6~9位数字、字母组合\");\n\n        return;\n      }\n\n      if (!s_pwd) {\n        _Toast(\"密码不能为空\");\n\n        return;\n      }\n\n      if (reg.test(s_pwd) == false) {\n        _Toast(\"密码6~9位数字、字母组合\");\n\n        return;\n      }\n\n      var url = 'http://127.0.0.1:3000/login/reg';\n      this.axios.post(url, {\n        s_name: this.uname,\n        s_pwd: this.upwd\n      }).then(function (result) {\n        //用户名已存在\n        if (result.data.code == 400) {\n          _Toast(result.data.msg); //this.uname=''\n\n        } //用户名不存在\n\n\n        if (result.data.code == 200) {\n          _Toast.success(result.data.msg);\n\n          setTimeout(function () {\n            _this.$emit('getDate', true);\n          }, 3000);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    login: function login() {\n      var _this2 = this;\n\n      var url = 'http://127.0.0.1:3000/login/login';\n      console.log(this.uname);\n      console.log(this.upwd);\n      this.axios.post(url, {\n        uname: this.uname,\n        upwd: this.upwd\n      }).then(function (response) {\n        if (response.data.length > 0) {\n          var sessionId = response.data[0].session_id;\n          var uname = response.data[0].s_name;\n          window.sessionStorage.setItem('sid', sessionId);\n          window.sessionStorage.setItem('uname', uname);\n\n          _Toast.success('登陆成功');\n\n          setTimeout(function () {\n            _this2.$router.go(-1); // this.$router.push({\n            // name:this.page,\n            // params:{\n            // \tsid:sessionId,\n            // \tuname:uname\n            // }\n            // })\n\n          }, 3000);\n        } else if (response.data.code == 404) {\n          _Toast(response.data.msg);\n        } else if (response.data.code == 400) {\n          _Toast(response.data.msg);\n        }\n      }).catch(function (err) {});\n    }\n  }\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;AAcA,OAAA,GAAA,MAAA,KAAA;AACA,GAAA,CAAA,GAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,EADA,gBACA;AAAA;;AACA,WAAA,KAAA,CAAA,SAAA,EAAA,KAAA;AACA,UAAA,MAAA,GAAA,KAAA,KAAA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA;AACA,UAAA,GAAA,GAAA,YAAA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,eAAA,SAAA;;AACA;AACA,OAHA,MAIA,IAAA,GAAA,CAAA,IAAA,CAAA,MAAA,KAAA,KAAA,EAAA;AACA,eAAA,iBAAA;;AACA;AACA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,eAAA,QAAA;;AACA;AACA;;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,KAAA,EAAA;AACA,eAAA,eAAA;;AACA;AACA;;AACA,UAAA,GAAA,GAAA,iCAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA,KADA;AAEA,QAAA,KAAA,EAAA,KAAA;AAFA,OAAA,EAIA,IAJA,CAKA,UAAA,MAAA,EAAA;AACA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,MAAA,CAAA,IAAA,CAAA,GAAA,EADA,CAEA;;AACA,SALA,CAMA;;;AACA,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA;;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,SAAA,EAAA,IAAA;AACA,WAFA,EAEA,IAFA,CAAA;AAGA;AACA,OAlBA,EAoBA,KApBA,CAoBA,UAAA,GAAA,EAAA;AAAA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AAAA,OApBA;AAsBA,KA7CA;AA8CA,IAAA,KA9CA,mBA8CA;AAAA;;AACA,UAAA,GAAA,GAAA,mCAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EACA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,IAAA,EAAA,KAAA;AAFA,OADA,EAMA,IANA,CAMA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AAEA,cAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,CAAA,EAAA,UAAA;AACA,cAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,CAAA,EAAA,MAAA;AACA,UAAA,MAAA,CAAA,cAAA,CAAA,OAAA,CAAA,KAAA,EAAA,SAAA;AACA,UAAA,MAAA,CAAA,cAAA,CAAA,OAAA,CAAA,OAAA,EAAA,KAAA;;AAEA,iBAAA,OAAA,CAAA,MAAA;;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA,EADA,CAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,WAVA,EAUA,IAVA,CAAA;AAWA,SAnBA,MAmBA,IAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAFA,MAEA,IAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OA/BA,EAgCA,KAhCA,CAgCA,UAAA,GAAA,EAAA,CAEA,CAlCA;AAmCA;AArFA;AAbA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"login_box\">\r\n\t  <img src=\"../../../assets/login/login_icon_03.png\" alt=\"\">\r\n\t  <input class=\"ipt\" type=\"text\" v-model.lazy=\"uname\" placeholder=\"请输入用户名\">\r\n\t  <input class=\"ipt\" type=\"password\" v-model=\"upwd\" placeholder=\"请输入密码\">\r\n\t\t<span v-show=\"istrue\">\r\n\t\t\t<slot name=\"rad\"></slot>\r\n\t\t</span>\r\n\t  <span v-show=\"istrue\" @click=\"login\" class=\"loginBtn dl\">登录</span>\r\n\t  <span @click=\"zc\" class=\"loginBtn zz\" :class=\"{dl:!istrue}\">注册</span>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport { Toast } from 'vant';\r\n\timport Vue from 'vue'\r\n\tVue.use(Toast);\r\n\texport default{\r\n\t\tprops:{\r\n\t\t\t\tistrue:{\r\n\t\t\t\t\ttype:Boolean,\r\n\t\t\t\t\tdefault:false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t  uname:'',\r\n\t\t\t  upwd:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tzc(){\r\n\t\t\t\tthis.$emit('getDate',false);\r\n\t\t\t\tvar s_name=this.uname\r\n\t\t\t\tvar s_pwd=this.upwd\r\n\t\t\t\tvar reg=/^\\w{6,9}$/i\r\n\t\t\t\tif(!s_name){\r\n\t\t\t\t\tToast(\"用户名不能为空\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse if(reg.test(s_name)==false){\r\n\t\t\t\t\tToast(\"用户名是6~9位数字、字母组合\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!s_pwd){\r\n\t\t\t\t\tToast(\"密码不能为空\")\r\n\t\t\t\t\t return;\r\n\t\t\t\t\t}\r\n\t\t\t\t if(reg.test(s_pwd)==false){\r\n\t\t\t\t\tToast(\"密码6~9位数字、字母组合\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar url='http://127.0.0.1:3000/login/reg';\r\n\t\t\t\tthis.axios.post(url,{\r\n\t\t\t\t\t\ts_name:this.uname,\r\n\t\t\t\t\t\ts_pwd:this.upwd\r\n\t\t\t\t})\r\n\t\t\t\t.then(\r\n\t\t\t\t\tresult=>{ \r\n\t\t\t\t\t\t//用户名已存在\r\n\t\t\t\t\t\tif(result.data.code==400){\r\n\t\t\t\t\t\t\tToast(result.data.msg)\r\n\t\t\t\t\t\t\t//this.uname=''\r\n\t\t\t\t\t\t}\r\n\t                    //用户名不存在\r\n\t\t\t\t\t\tif(result.data.code==200){\r\n\t\t\t\t\t\t\tToast.success(result.data.msg)\r\n\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.$emit('getDate',true);\r\n\t\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t.catch(err=>{console.log(err)})\t\t\r\n\t\t\t\r\n\t},\r\n\t\t\tlogin(){ \r\n\t\t\t\tvar url= 'http://127.0.0.1:3000/login/login';\r\n\t\t\t\tconsole.log(this.uname);\r\n\t\t\t\tconsole.log(this.upwd);\r\n\t\t\t\tthis.axios.post(url,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tuname:this.uname,\r\n\t\t\t\t\t\tupwd:this.upwd\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t.then((response)=>{\r\n\t\t\t\t\tif(response.data.length>0){\r\n\r\n\t\t\t\t\t\tvar sessionId = response.data[0].session_id;\r\n\t\t\t\t\t\tvar uname = response.data[0].s_name;\r\n\t\t\t\t\t\twindow.sessionStorage.setItem('sid',sessionId);\r\n\t\t\t\t\t\twindow.sessionStorage.setItem('uname',uname);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tToast.success('登陆成功');\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.$router.go(-1)\r\n\t\t\t\t\t\t\t// this.$router.push({\r\n\t\t\t\t\t\t\t\t// name:this.page,\r\n\t\t\t\t\t\t\t\t// params:{\r\n\t\t\t\t\t\t\t\t// \tsid:sessionId,\r\n\t\t\t\t\t\t\t\t// \tuname:uname\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t},3000)\r\n\t\t\t\t\t}else if(response.data.code == 404){\r\n\t\t\t\t\t\tToast(response.data.msg);\r\n\t\t\t\t\t}else if(response.data.code == 400){\r\n\t\t\t\t\t\tToast(response.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.login_box{\r\n\t  width:100%;\r\n\t  height:100%;\r\n\t  background:#fff;\r\n\t  border-radius: 2rem;\r\n\t  display:flex;\r\n\t  justify-content: space-around;\r\n\t  align-items: center;\r\n\t  flex-direction:column;\r\n\t  padding-top:2rem;\r\n\t}\r\n\t.login_box img{\r\n\t  width:4.53125rem;\r\n\t  height:1.4375rem;\r\n\t}\r\n\t.rad_box{\r\n\t  width: 14.9375rem;\r\n\t  height: 2.8125rem;\r\n\t  display:flex;\r\n\t  justify-content: space-between;\r\n\t  flex-direction: row; \r\n\t  color:#666;\r\n\t  font-size: 0.625rem;\r\n\t  align-items: center;  \r\n\t  font-weight: 600;\r\n\t}\r\n\t.login_box .ipt{\r\n\t  width:14.9375rem;\r\n\t  height:2.8125rem;\r\n\t  border:none;\r\n\t  border-bottom:1px solid #ccc;\r\n\t  color:black;\r\n\t  font-size:1rem;\r\n\t  font-weight: 600;\r\n\t}\r\n\t.loginBtn{\r\n\t  width: 14.9375rem;\r\n\t  height: 2.8125rem;\r\n\t  text-align: center;\r\n\t  line-height: 2.8125rem;\r\n\t  border-radius: 3rem;\r\n\t  font-weight: 600;\r\n\t}\r\n\t.login_box\t.dl{\r\n\t  color:#fff;\r\n\t  background-color:#333;\r\n\t}\r\n\t.zz{\r\n\t  color:#333;\r\n\t  background-color:#fff;\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src/components/views/loginReg"}]}